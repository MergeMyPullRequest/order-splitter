<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="animations/flip-left-enter-animation.html">
<link rel="import" href="animations/flip-left-exit-animation.html">

<dom-module id="app-container">
    <template>
        <style>
            neon-animatable {
                backface-visibility: hidden;
            }
            #a {
                /* background-color: lightgrey; */
            }
            #b {
                /* background-color: darkgrey; */
            }
            neon-animated-pages {
                height: 100vh;
                overflow: scroll;
            }
            #versionInfo {
                position: fixed;
                top: 0;
                right:10;
                z-index: 5;
                background-color: white;
                padding: 3px;
                border-radius: 10px;
                white-space: nowrap;
            }
            .wrapper {
                display: grid;
                grid-gap: 10px;
                /*grid-template-columns: 500px;*/
                grid-template-columns: repeat(auto-fill, minmax(200px, 500px));
            }
        </style>
        <div id="versionInfo"> INSERT_SHA
            <paper-tooltip>
                <div>version INSERT_VERSION</div>
                <div>git sha INSERT_SHA</div>
                <div>INSERT_BUILD_TIME</div>
            </paper-tooltip>
        </div>
        <neon-animated-pages id="flipCard" selected="{{selectedSide}}" entry-animation="flip-left-enter-animation" exit-animation="flip-left-exit-animation">
            <neon-animatable entry-animation="flip-left-enter-animation" exit-animation="flip-left-exit-animation" id="a"> 
                <div class="wrapper">
                    <div>
                        <div>
                            Example input:<br>
                            (from OrderUp confirmation page)
                        </div>
                        <div>
                            <pre>
                        <example-order></example-order>
                            </pre>
                        </div>
                    </div>
                    <div>
                        <order-input id="orderInput"></order-input>
                        <paper-button on-tap="_onSplitTap">Split</paper-button>
                    </div>
                </div>
            </neon-animatable>
            <neon-animatable entry-animation="flip-left-enter-animation" exit-animation="flip-left-exit-animation" id="b"> 
                <paper-button on-tap="_onBackBtn">Back</paper-button>
                <order-split-results-table></order-split-results-table>
            </neon-animatable>
        </neon-animated-pages>
    </template>
    <script>
        defineCustomElement('app-container', class extends Polymer.Element {
            ready() {
                super.ready();
            }
            _onSplitTap() {
                var order = this.$.orderInput.getOrder();
                OrderSplitResults.show(order);
                this.selectedSide = 1;
            }
            _onBackBtn() {
                this.selectedSide = 0;
            }
            static get properties() {

                return {
                    selectedSide: {
                        type: Number,
                        value: 0
                    }
                };
            }
        });
    </script>
</dom-module>
